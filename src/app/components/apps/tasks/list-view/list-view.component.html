<app-page-header [title]="'Task'" [title1]="['Task List View']" [activeitem]="'Task List View'"></app-page-header>

<!-- Start::row-1 -->
<div class="grid grid-cols-12 gap-x-6">
    @for(card of cardData;track $index){
    <div class="xxl:col-span-3 col-span-12">
        <spk-listview-card [card]="card"
        ></spk-listview-card>
    </div>
}
</div>
<!--End::row-1 -->

 <!-- Start::row-2 -->
<div class="grid grid-cols-12 gap-x-6">
    <div class="xxl:col-span-12 xl:col-span-12 col-span-12">
        <div class="box">
            <div class="box-header justify-between">
                <div class="box-title">
                    Total Tasks
                </div>
                <div class="flex">
                    <button type="button" class="ti-btn ti-btn-sm bg-primary text-white btn-wave waves-light" data-hs-overlay="#create-task"><i class="ri-add-line font-medium align-middle"></i> Create Task</button>
                    <!-- Start::add task modal -->
                    <div class="hs-overlay hidden ti-modal" id="create-task" tabindex="-1">
                        <div class="hs-overlay-open:mt-7 ti-modal-box mt-0 ease-out">
                            <div class="ti-modal-content">
                                <div class="ti-modal-header">
                                    <h6 class="ti-modal-title">Add Task</h6>
                                    <button type="button" class="hs-dropdown-toggle ti-modal-close-btn" data-hs-overlay="#create-task">
                                        <span class="sr-only">Close</span>
                                        <svg class="w-3.5 h-3.5" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <path d="M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z" fill="currentColor"/>
                                        </svg>
                                      </button>
                                </div>
                                <div class="ti-modal-body">
                                    <div class="grid grid-cols-12 gap-x-6 gap-y-2">
                                        <div class="xl:col-span-6 col-span-12">
                                            <label for="task-name" class="form-label">Task Name</label>
                                            <input type="text" class="form-control" id="task-name" placeholder="Task Name">
                                        </div>
                                        <div class="xl:col-span-6 col-span-12">
                                            <label for="task-id" class="form-label">Task ID</label>
                                            <input type="text" class="form-control" id="task-id" placeholder="Task ID">
                                        </div>
                                        <div class="xl:col-span-6 col-span-12">
                                            <label class="form-label">Assigned Date</label>
                                            <div class="form-group">
                                                <div class="input-group">
                                                    <div class="input-group-text text-textmuted dark:text-textmuted/50"> <i class="ri-calendar-line"></i> </div>
                                                    <spk-flatpickr placeholder="Choose Date and Time" class="form-control custom-datepickr"
                                                    [mode]="'single'" [altInput]="false" [convertModelValue]="true" [enableTime]="true"
                                                    [dateFormat]="'Y-m-d H:i'"></spk-flatpickr>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="xl:col-span-6 col-span-12">
                                            <label class="form-label">Due Date</label>
                                            <div class="form-group">
                                                <div class="input-group">
                                                    <div class="input-group-text text-textmuted dark:text-textmuted/50"> <i class="ri-calendar-line"></i> </div>
                                                    <spk-flatpickr placeholder="Choose Date and Time" class="form-control custom-datepickr"
                                                    [mode]="'single'" [altInput]="false" [convertModelValue]="true" [enableTime]="true"
                                                    [dateFormat]="'Y-m-d H:i'"></spk-flatpickr>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="xl:col-span-6 col-span-12">
                                            <label class="form-label">Status</label>
                                            <spk-ng-select 
                                            [options]="Status"
                                            [selectClass]="''"
                                            [clearable]="true"
                                            [searchable]="true"
                                            [hideSelected]="false"
                                            [placeholder]="'Select'"
                                            [additionalProperties]="{}">
                                            </spk-ng-select>
                                        </div>
                                        <div class="xl:col-span-6 col-span-12">
                                            <label class="form-label">Priority</label>
                                            <spk-ng-select 
                                            [options]="Priority"
                                            [selectClass]="''"
                                            [clearable]="true"
                                            [searchable]="true"
                                            [hideSelected]="false"
                                            [placeholder]="'Select'"
                                            [additionalProperties]="{}">
                                            </spk-ng-select>
                                        </div>
                                        <div class="xl:col-span-12 col-span-12">
                                            <label class="form-label">Assigned To</label>
                                            <spk-ng-select
                                            [options]="tags"
                                            [selectClass]="''"
                                            [multiple]="true"
                                            [defaultValue]="selectedChoices"
                                            [clearable]="true"
                                            [searchable]="true"
                                            [hideSelected]="true"
                                            [additionalProperties]="{}">
                                            </spk-ng-select>
                                        </div>
                                    </div>
                                </div>
                                <div class="ti-modal-footer">
                                    <button type="button" class="hs-dropdown-toggle ti-btn  btn-wave ti-btn-light" data-hs-overlay="#create-task">
                                        Cancel
                                        </button>
                                    <button type="button" class="ti-btn bg-primary text-white">Add Task</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End::add task modal -->
                    <spk-dropdowns [Customclass]="'dropdown ms-2 no-caret'" [class]="'ti-btn ti-btn-icon bg-secondary/10 text-secondary ti-btn-sm btn-wave waves-light ti-dropdown-toggle hs-dropdown-toggle no-caret'"  [Icon]="true" [IconClass]="'ti ti-dots-vertical'"
                    [Menuclass]="'dropdown-menu'" >
                            <li><a class="ti-dropdown-item" href="javascript:void(0);">New Tasks</a></li>
                            <li><a class="ti-dropdown-item" href="javascript:void(0);">Pending Tasks</a></li>
                            <li><a class="ti-dropdown-item" href="javascript:void(0);">Completed Tasks</a></li>
                            <li><a class="ti-dropdown-item" href="javascript:void(0);">Inprogress Tasks</a></li>
                    </spk-dropdowns>
                </div>
            </div>
            <div class="box-body p-0">
                <div class="table-responsive">
                    <spk-reusable-tables  tableClass="ti-custom-table text-nowrap" tableHead="border-b !border-defaultborder 
                    dark:!border-defaultborder/10" [columns]="listColumns"  (toggleSelectAll)="handleToggleSelectAll($event)"
                    [showCheckbox]="true" >
                    @for(list of lists;track $index){
                            <tr class="task-list border-b !border-defaultborder dark:!border-defaultborder/10">
                                <td class="task-checkbox">
                                    <input class="form-check-input" [checked]="allTasksChecked"  [(ngModel)]="list.checked" type="checkbox" value="" aria-label="...">
                                </td>
                                <td>
                                    <span class="font-medium">{{list.task}}</span>
                                </td>
                                <td>
                                    <span class="font-medium">{{list.id}}</span>
                                </td>
                                <td>
                                    {{list.assigneddate}}
                                </td>
                                <td>
                                    <span class="font-medium text-{{list.bg}}">{{list.status}}</span>
                                </td>
                                <td>
                                    {{list.duedate}}
                                </td>
                                <td>
                                    <span class="badge bg-{{list.bg1}}/10 text-{{list.bg1}}">{{list.priority}}</span>
                                </td>
                                <td>
                                    <div class="avatar-list-stacked">
                                        @for(image of list.images;track $index){
                                        <span class="avatar avatar-sm avatar-rounded">
                                            <img [src]="image" alt="img">
                                        </span>
                                    }
                                    @if(list.count){
                                        <a class="avatar avatar-sm bg-primary avatar-rounded text-white" href="javascript:void(0);">
                                            +{{list.count}}
                                        </a>
                                    }
                                    </div>
                                </td>
                                <td>
                                    <div class="flex items-center">
                                        <button aria-label="button" type="button" class="ti-btn ti-btn-soft-primary ti-btn-icon ti-btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit">
                                            <i class="ri-edit-line"></i>
                                        </button>
                                        <button aria-label="button" type="button" class="ti-btn ti-btn-soft-danger ti-btn-icon ms-1 ti-btn-sm task-delete-btn" data-bs-toggle="tooltip" data-bs-placement="top" title="Delete">
                                            <i class="ri-delete-bin-5-line"></i>
                                        </button>
                                    </div>
                                </td>
                                <td>
                                    <span class="badge bg-{{list.bg2}}/10 text-{{list.bg2}}">{{list.update}}</span>
                                </td>
                            </tr>
                        }
                    </spk-reusable-tables>
            </div>
            <div class="box-footer">
                <nav aria-label="..." class="me-4 sm:mb-0 mb-2">
                    <ul class="ti-pagination justify-end">
                        <li class="page-item disabled">
                            <a class="page-link px-3 py-[0.375rem] !border-e-0">Previous</a>
                        </li>
                        <li class="page-item"><a class="page-link px-3 py-[0.375rem] !border-e-0"
                                href="javascript:void(0);">1</a></li>
                        <li class="page-item " aria-current="page">
                            <a class="page-link active px-3 py-[0.375rem] !border-e-0"
                                href="javascript:void(0);">2</a>
                        </li>
                        <li class="page-item " aria-current="page">
                            <a class="page-link px-3 py-[0.375rem] !border-e-0"
                                href="javascript:void(0);">3</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link px-3 py-[0.375rem]" href="javascript:void(0);">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
<!--End::row-2 -->